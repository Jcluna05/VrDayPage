!function(e){"use strict";var i={};i={init:function(){var i=this,n=function(){i.initLicenseForm(e(this))};e(".xt-license-activation").each(n)},initLicenseForm:function(i){function n(e){return"xt_license_"+r+"_"+e}function t(e){e?"valid"===e.code||"expired"===e.code?l(e):"exists"===e.code?a(e):"revoked"===e.code?d(e):o(e):o(e)}function a(e){m.hide(),x.hide(),k.hide(),_.hide(),p.hide(),v.fadeIn(),v.find('input[name="purchase_code"]').val(e.license.purchase_code),v.find('input[name="domain"]').val(e.license.domain),g.html(e.license_summary).fadeIn()}function d(e){c(),g.empty().hide(),k.html(e.msg),k.fadeIn(),p.hide()}function c(){g.empty().hide(),v.hide(),p.hide(),x.hide(),k.hide(),_.hide(),m.fadeIn()}function l(i){v.hide(),m.hide(),k.hide(),_.hide(),x.fadeIn(),i.license.expired?(y.hide(),I.fadeIn()):(I.hide(),y.fadeIn()),p.fadeIn(),g.html(i.license_summary).fadeIn(),p.find('[name="purchase_code"]').val(i.license.purchase_code),p.find('[name="domain"]').val(i.license.domain),e(document).trigger("xt-license-activated",[i.license,i.license_summary,g])}function o(){v.hide(),m.hide(),k.hide(),p.hide(),x.hide(),_.fadeIn();var e=3;b.html(e),e--;var i=setInterval(function(){0===e?(b.empty(),clearInterval(i),c()):(b.html(e),e--)},1e3)}var r=e(i).data("id"),f=e(i).data("homeurl"),s=e(i).data("domain"),u=e(i).data("ajaxurl"),h=e(i).find(".xt-license-form"),m=e(i).find("#xt-license-activation-form"),v=e(i).find("#xt-license-revoke-form"),p=e(i).find("#xt-license-local-revoke-form"),x=e(i).find("#xt-license-activated"),y=e(x).find(".xt-license-status-active"),I=e(x).find(".xt-license-status-expired"),_=e(i).find("#xt-license-invalid"),g=e(i).find(".xt-license-info"),k=e(i).find(".xt-license-revoke-info"),b=e(i).find(".xt-license-timer");h.each(function(){var i=e(this);i.find('input[name="purchase_code"]').on("blur",function(){e(this).val(e(this).val().trim())}),i.find('input[type="submit"]').on("click",function(a){a.preventDefault();var d=e(this),c=d.val();d.val("Processing..."),d.attr("disabled",!0);var l=i.find('input[name="action"]').val();if(l===n("activation")){var o=""!==s?s:location.host.replace("www.",""),r=f;i.find('input[name="domain"]').val(o),i.find('input[name="installation_url"]').val(r)}var h=i.find(":input").serialize();e.ajax({cache:!1,url:u,type:"POST",data:h,dataType:"json"}).done(function(e){t(e),d.val(c),d.removeAttr("disabled")}).fail(function(e){alert("Something went wrong! Please try again later!"),d.val(c),d.removeAttr("disabled")})})}),v.find(".xt-license-revoke-cancel").on("click",function(e){e.preventDefault(),c()})}},e(document).ready(function(){i.init()})}(jQuery);